@page "/Prayer"
@inject NavigationManager Nav
@using AppBibleNew.Model
@using AppBibleNew.Service
@inject IPrayerService PrayerService

<div class="row p-0 position-absolute top-50 start-50 translate-middle" style="height:100%; margin:auto;">
    <div class="col-6 d-flex justify-content-center align-items-center">

        @if (!string.IsNullOrEmpty(KinhCauNguyen))
        {
            <div @onclick="() => GoToPrayer(KinhCauNguyen)" class="card card-hover" style="width:65vw;">
                <img class="card-img-top" src="Image/prayer_picture.png" />
                <div class="overlay"></div>
                <div class="card-img-overlay d-flex justify-content-center align-items-center">
                    <h4 class="card-title text-white fs-4">Kinh Cầu Nguyện</h4>
                </div>
            </div>
        }
        else
        {
            <p>Đang tải...</p>
        }

    </div>

    <div class="col-6 d-flex justify-content-center align-items-center">

        <div @onclick="() => GoToRosary()" class="card card-hover" style="width:65vw;">
            <img class="card-img-top" src="Image/rosary_picture.png" alt="Card image" />
            <div class="overlay"></div>
            <div class="card-img-overlay d-flex justify-content-center align-items-center">
                <h4 class="card-title text-white fs-4">Lần Hạt Mân Côi</h4>
            </div>
        </div>

    </div>
</div>

<style>
    .card-img-top {
        object-fit: cover;
        height: 70vh;
        transition: transform 0.5s ease; /* mượt khi phóng to */
    }

    .overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6); /* màu đen mờ */
        border-radius: 0.25rem;
        pointer-events: none; /* để hover xuyên qua overlay */
    }

    .card-hover {
        overflow: hidden; /* ảnh phóng to nhưng không tràn ra ngoài */
        position: relative;
    }

        /* Hover effect */
        .card-hover:hover .card-img-top {
            transform: scale(1.1); /* phóng to 10% */
        }
</style>
@code {
    private List<PrayerRoot>? data;
    private string? KinhCauNguyen;
    protected override async Task OnInitializedAsync()
    {
        data = await PrayerService.LoadPrayerAsync();
        if(data != null)
        {
            KinhCauNguyen = data.FirstOrDefault(x => x.PartName.Contains("Các câu cầu nguyện"))?.PartName;
        }
    }
    void GoToPrayer(string? prayerName)
    {
        if (!string.IsNullOrEmpty(prayerName))
        {
            Nav.NavigateTo($"/Prayer/PrayerList/{prayerName}");
        }
    }

    void GoToRosary()
    {
        Nav.NavigateTo($"/Prayer/RosaryList");
    }
}
